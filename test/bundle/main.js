/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";const t="0123456789abcdef";class e{constructor(t){if(this.bytes=t,16!==t.length)throw new TypeError("not 128-bit length")}static fromFieldsV7(t,n,r,s){if(!Number.isInteger(t)||!Number.isInteger(n)||!Number.isInteger(r)||!Number.isInteger(s)||t<0||n<0||r<0||s<0||t>0xffffffffffff||n>4095||r>1073741823||s>4294967295)throw new RangeError("invalid field value");const i=new Uint8Array(16);return i[0]=t/Math.pow(2,40),i[1]=t/Math.pow(2,32),i[2]=t/Math.pow(2,24),i[3]=t/Math.pow(2,16),i[4]=t/Math.pow(2,8),i[5]=t,i[6]=112|n>>>8,i[7]=n,i[8]=128|r>>>24,i[9]=r>>>16,i[10]=r>>>8,i[11]=r,i[12]=s>>>24,i[13]=s>>>16,i[14]=s>>>8,i[15]=s,new e(i)}toString(){let e="";for(let n=0;n<this.bytes.length;n++)e+=t.charAt(this.bytes[n]>>>4),e+=t.charAt(15&this.bytes[n]),3!==n&&5!==n&&7!==n&&9!==n||(e+="-");return e}}class n{constructor(){this.timestamp=0,this.counter=0,this.random=new i}generate(){const t=Date.now();if(t>this.timestamp)this.timestamp=t,this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32());else if(this.counter++,this.counter>4398046511103){for(let t=0;t<1e6;t++)if(Date.now()>this.timestamp)return this.generate();return this.timestamp=0,this.generate()}return e.fromFieldsV7(this.timestamp,Math.trunc(this.counter/Math.pow(2,30)),this.counter&Math.pow(2,30)-1,this.random.nextUint32())}}let r,s=t=>{for(let e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};"undefined"!=typeof crypto&&crypto.getRandomValues&&(s=t=>crypto.getRandomValues(t));class i{constructor(){this.buffer=new Uint32Array(8),this.cursor=1/0}nextUint32(){return this.cursor>=this.buffer.length&&(s(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}const o=()=>(r||(r=new n)).generate().toString(),a=(t,e="")=>{if(!t)throw new Error("Assertion failed"+(e?": "+e:""))};describe("uuidv7()",(function(){const t=[];for(let e=0;e<1e5;e++)t[e]=o();it("returns 8-4-4-4-12 hexadecimal string representation",(function(){t.forEach((t=>a("string"==typeof t)));const e=/^[0-9a-f]{8}-[0-9a-f]{4}-7[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/;t.forEach((t=>a(e.test(t))))})),it("generates unique identifier",(function(){a(new Set(t).size===t.length)})),it("generates sortable string representation by creation time",(function(){const e=t.slice().sort();for(let n=0;n<t.length;n++)a(t[n]===e[n])})),it("encodes up-to-date unix timestamp",(function(){const t=/^([0-9a-f]{8})-([0-9a-f]{4})-/;for(let e=0;e<1e4;e++){const e=Date.now(),n=t.exec(o()),r=parseInt(n[1]+n[2],16);a(Math.abs(e-r)<16)}})),it("encodes sortable timestamp and counter",(function(){const e=/^([0-9a-f]{8})-([0-9a-f]{4})-(7[0-9a-f]{3})-([89ab][0-9a-f]{3})-([0-9a-f]{4})/,n=e.exec(t[0]);let r=parseInt(n[1]+n[2],16),s=parseInt(n[3]+n[4]+n[5],16);for(let n=1;n<t.length;n++){const i=e.exec(t[n]),o=parseInt(i[1]+i[2],16),c=parseInt(i[3]+i[4]+i[5],16);a(r<o||r===o&&s<c),r=o,s=c}})),it("sets constant bits and random bits properly",(function(){const e=new Array(128).fill(0);for(const n of t){const t=n.replaceAll("-","");for(let n=0;n<8;n++){const r=parseInt(t.substring(4*n,4*n+4),16);for(let t=0;t<16;t++)r&32768>>>t&&e[16*n+t]++}}const n=t.length;a(0===e[48],"version bit 48"),a(e[49]===n,"version bit 49"),a(e[50]===n,"version bit 50"),a(e[51]===n,"version bit 51"),a(e[64]===n,"variant bit 64"),a(0===e[65],"variant bit 65");const r=4.417173*Math.sqrt(.25/n);for(let t=96;t<128;t++){const s=e[t]/n;a(Math.abs(s-.5)<r,`random bit ${t}: ${s}`)}}))}))})();